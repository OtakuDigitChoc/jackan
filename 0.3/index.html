<!DOCTYPE html>
<html>
    <head>
        <title>Jackan</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link id="josman-stylesheet" rel="stylesheet" type="text/css" href="../css/josman.css">
        <!-- <link id="bootstrap-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link id="bootstrap-theme-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
        -->
        <link rel="stylesheet" type="text/css" href="website-template/css/josman.css"> 
        <!--
        <link  rel="stylesheet" type="text/css" href="website-template/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="website-template/css/bootstrap-theme.min.css">
        -->
    </head>
    <body>
        <div id="josman-wrapper">
            <div id="josman-header">

                <div style="position:absolute;  min-height:100px; min-width:100%; ">
                    <a id="josman-program-logo-link" href="../index.html">
                        <img id="josman-program-logo" src="../img/jackan-logo-200px.png" alt="program logo">    
                    </a>

                    <a id="josman-repo-link" href="../index.html">Jackan</a>


                    <a href="http://dati.trentino.it/en/" target="_blank">
                        <img style="float:right; padding:10px; width:80px" src="../img/tod-logo.png" alt="organization logo">                        
                    </a>

                    <div id="josman-nav-header">
                        <a id="josman-home" href="../index.html">Home</a>                        
                        <span id="josman-usage" style="margin-left:15px">Usage:                        
                            
                            
                        <a class="josman-version-tab-header " href="../0.4/index.html">0.4</a><a class="josman-version-tab-header josman-tag-selected" href="../0.3/index.html">0.3</a><a class="josman-version-tab-header " href="../0.2/index.html">0.2</a></span>
                        <span style="margin-left:35px">
                            <a id="josman-project" class="josman-external-link" href="https://github.com/opendatatrentino/jackan" target="_blank">Repo</a>
                            <a id="josman-wiki" class="josman-external-link" href="https://github.com/opendatatrentino/jackan/wiki" target="_blank">Wiki</a> 
                        </span>
                    </div>
                </div>                

            </div>

            <div id="josman-sidebar">
                <div id="josman-internal-sidebar" class="josman-sidebar-block"><ul class="josman-tree"><li><div class="josman-sidebar-page-title josman-sidebar-selected">Usage</div><ul class="josman-tree"><div><a href="#getting-started">Getting started</a></div><div><a href="#usage-examples">Usage examples</a></div><div><a href="#serialization">Serialization</a></div><div><a href="#logging">Logging</a></div></ul></li><li><div class="josman-sidebar-page-title"><a href="CHANGES.html">Release notes</a></div><ul class="josman-tree"></ul></li></ul></div>



                <div id="josman-sidebar-managed-block" class="josman-sidebar-block">

                    <div id="josman-javadoc-link" class="josman-sidebar-page-title"><a class="josman-external-link" href="javadoc/index.html" target="_blank">Javadoc</a></div>
                    <!-- <div><a href="CHANGES.html">Release notes</a></div> -->              
                </div>


            </div>

            <div id="josman-content">
                <div id="josman-internal-content"><p>This release allows reading metadata from CKAN and performing searches.</p><h3><a href="#getting-started" name="getting-started">Getting started</a></h3><p><strong>With Maven</strong>: If you use Maven as build system, put this in the <code>dependencies</code> section of your <code>pom.xml</code>:</p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;eu.trentorise.opendata&lt;/groupId&gt;
        &lt;artifactId&gt;jackan&lt;/artifactId&gt;
        &lt;version&gt;0.3.3&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre><p><strong>Without Maven</strong>: you can download Jackan jar and its dependencies <a href="../releases/jackan-0.3.3.zip" target="_blank"> from here</a>, then copy the jars to your project classpath.</p><p>In case updates are available, version numbers follow <a href="http://semver.org/" target="_blank">semantic versioning</a> rules.</p><h3><a href="#usage-examples" name="usage-examples">Usage examples</a></h3><h4><a href="#get-the-dataset-list-of-dati-trentino-it-" name="get-the-dataset-list-of-dati-trentino-it-">Get the dataset list of dati.trentino.it:</a></h4><p>Test code can be found in <a href="https://github.com/opendatatrentino/jackan/blob/jackan-0.3.3/src/test/java/eu/trentorise/opendata/jackan/test/ckan/TestApp.java" target="_blank">TestApp.java</a></p>
<pre><code><br>    import eu.trentorise.opendata.jackan.JackanException;
    import eu.trentorise.opendata.jackan.ckan.CkanClient;

    public class App {
        public static void main( String[] args )
        {        
            CkanClient cc = new CkanClient("http://dati.trentino.it");        
            System.out.println(cc.getDatasetList());               
        }
    }

</code></pre><h4><a href="#get-list-of-first-10-datasets-of-dati-trentino-it-and-print-their-resources-" name="get-list-of-first-10-datasets-of-dati-trentino-it-and-print-their-resources-">Get list of first 10 datasets of dati.trentino.it and print their resources:</a></h4>
<pre><code><br>    import eu.trentorise.opendata.jackan.ckan.CkanClient;
    import eu.trentorise.opendata.jackan.ckan.CkanDataset;
    import eu.trentorise.opendata.jackan.ckan.CkanResource;
    import java.util.List;

    public class App 
    {
        public static void main( String[] args )
        {

            CkanClient cc = new CkanClient("http://dati.trentino.it");

            List&lt;String&gt; ds = cc.getDatasetList(10, 0);

            for (String s : ds){
                System.out.println();
                System.out.println("DATASET: " + s);
                CkanDataset d = cc.getDataset(s);            
                System.out.println("  RESOURCES:");
                for (CkanResource r : d.getResources()){                
                    System.out.println("    " + r.getName());
                    System.out.println("    FORMAT: " + r.getFormat());
                    System.out.println("       URL: " + r.getUrl());
                }
            }
        }
    }

</code></pre><p>Should give something like this:</p>
<pre><code><br>    DATASET: abitazioni
      RESOURCES:
        abitazioni
        FORMAT: JSON
           URL: http://www.statweb.provincia.tn.it/INDICATORISTRUTTURALISubPro/exp.aspx?idind=133&amp;info=d&amp;fmt=json
        abitazioni
        FORMAT: CSV
           URL: http://dati.trentino.it/storage/f/2013-06-16T113651/_lcmGkp.csv
        numero-di-abitazioni
        FORMAT: JSON
           URL: http://www.statweb.provincia.tn.it/INDICATORISTRUTTURALISubPro/exp.aspx?ntab=Sub_Numero_Abitazioni&amp;info=d&amp;fmt=json
        numero-di-abitazioni
        FORMAT: CSV
           URL: http://dati.trentino.it/storage/f/2013-06-16T113652/_yWBmJG.csv

    DATASET: abitazioni-occupate
      RESOURCES:
        abitazioni-occupate
        FORMAT: JSON
           URL: http://www.statweb.provincia.tn.it/INDICATORISTRUTTURALISubPro/exp.aspx?idind=134&amp;info=d&amp;fmt=json
        abitazioni-occupate
        FORMAT: CSV
           URL: http://dati.trentino.it/storage/f/2013-06-16T113653/_iaMMc2.csv
        numero-di-abitazioni-occupate
        FORMAT: JSON
           URL: http://www.statweb.provincia.tn.it/INDICATORISTRUTTURALISubPro/exp.aspx?ntab=Sub_Numero_Abitazioni_Occupate&amp;info=d&amp;fmt=json
        numero-di-abitazioni-occupate
        FORMAT: CSV
           URL: http://dati.trentino.it/storage/f/2013-06-16T113654/__lLACk.csv

    ...

</code></pre><h4><a href="#search-datasets-filtering-by-tags-and-groups-" name="search-datasets-filtering-by-tags-and-groups-">Search datasets filtering by tags and groups:</a></h4>
<pre><code><br>    import eu.trentorise.opendata.jackan.ckan.CkanClient;
    import eu.trentorise.opendata.jackan.ckan.CkanDataset;
    import eu.trentorise.opendata.jackan.ckan.CkanQuery;

    public class TestApp 
    {

        public static void main( String[] args )
        {
            CkanQuery query = CkanQuery.filter().byTagNames("settori economici", "agricoltura").byGroupNames("conoscenza");

            List&lt;CkanDataset&gt; filteredDatasets = cc.searchDatasets(query, 10, 0).getResults();

            for (CkanDataset d : filteredDatasets){
                System.out.println();
                System.out.println("DATASET: " + d.getName());           
            } 
        }
    }
</code></pre><p>Should give something like this:</p>
<pre><code><br>    DATASET: produzione-di-mele

    DATASET: produzione-di-uva-da-vino

    DATASET: produzione-lorda-vendibile-frutticoltura

    DATASET: produzione-lorda-vendibile-viticoltura

    DATASET: produzione-lorda-vendibile-zootecnia

    DATASET: produzione-lorda-vendibile-silvicoltura
</code></pre><h3><a href="#serialization" name="serialization">Serialization</a></h3><p>For serialization Jackson library annotations are used. Notice that although field names of Java objects are camelcase (like <em>authorEmail</em>), serialized fields follows CKAN API stlye and use underscores (like author_email).</p><p>If you want to serialize to json a Java object <em>obj</em> fetched by Jackan, you can call </p>
<pre><code>    String json = CkanClient.getObjectMapperClone().writeValueAsString(obj);
</code></pre><h3><a href="#logging" name="logging">Logging</a></h3><p>Jackan uses native Java logging system (JUL). If you also use JUL in your application and want to see Jackan logs, you can take inspiration from <a href="https://github.com/opendatatrentino/jackan/blob/jackan-0.3.3/src/test/resources/odt.commons.logging.properties">jackan test logging properties</a>. If you have an application which uses SLF4J logging system, you can route logging with <a href="http://mvnrepository.com/artifact/org.slf4j/jul-to-slf4j" target="_blank">JUL to SLF4J bridge</a>, just remember <a href="http://stackoverflow.com/questions/9117030/jul-to-slf4j-bridge" target="_blank"> to programmatically install it first. </a></p></div>
            </div>

        </div>        
        <script src="../js/jquery-1.11.2.min.js"></script>
        <!-- <script src="../js/bootstrap-3.3.4.min.js"></script> -->

        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-1.11.2.min.js"></script>
        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-3.3.4.min.js"></script>
        <script>
            // idotic CSS in style doesn't work, so use jquery instead: 
            // also would like pre code but this will select code and won't work. There aren't selectors for parents

            $("pre").css("max-width", "680px").css("overflow-x", "auto");

            /* We don't support this yet...
             $('.josman-tree-toggle').click(function () {
             $(this).parent().children('ul.tree').toggle(200);
             return false;
             });
             */
        </script>
    </body>
</html>
